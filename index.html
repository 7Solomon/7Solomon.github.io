<!DOCTYPE html>
<html>
<head>
  <!-- 
  <link rel="stylesheet" type="text/css" href="/static/css/background.css">
  -->
  <link rel="stylesheet" type="text/css" href="/static/css/verse.css">
  <link rel="stylesheet" type="text/css" href="/static/css/clock.css">
  <link rel="stylesheet" type="text/css" href="/static/css/chat.css">
  <link rel="stylesheet" type="text/css" href="/static/css/videoPlayer.css">

  <link href="https://fonts.cdnfonts.com/css/ink-free" rel="stylesheet">
  <link href="https://fonts.cdnfonts.com/css/mv-boli" rel="stylesheet">
  <title>The Nachrichten</title>
  
</head>
<body style="background-image: url('image.jpeg');"> 

  <div class="clock" id="clock"></div>


  <div class="verse">
    <span style="color:#ffffff">Verse</span>
    <div class="place"><b>&mdash;Place</b></div>
  </div>

  <div class="chat">{{data['chat']}}</div>


</body>
</html>

<!-- JavaScript Stuff-->


<script src="scripts/require.js">
const express = require('express');
const request = require('request');

  function fixCORSE(){
  const app = express();
  app.use((req, res, next) => {
    res.header('Access-Control-Allow-Origin', '*');
    next();
  });

  app.get('/', (req, res) => {
    request(
      { url: 'https://losung.net' },
      (error, response, body) => {
        if (error || response.statusCode !== 200) {
          return res.status(500).json({ type: 'error', message: err.message });
        }
        res.json(JSON.parse(body));
      }
    )
  });
const PORT = process.env.PORT || 3000;
app.listen(PORT, () => console.log(`listening on ${PORT}`));
}

 
  async function scrapeVerse() {
  const response = await fetch("https://losung.net");
  const html = await response.text();
  const parser = new DOMParser();
  const doc = parser.parseFromString(html, "text/html");
  
  console.log(doc.querySelector('.jerky'))

 /*
  const verse = doc.querySelector('.jerky').textContent;
  const place = doc.querySelector('.losungen-verse1verse').textContent;

  console.log(verse);
  document.getElementsByClassName(verse)[0].innerHTML = verse;
  console.log(place);
  document.getElementsByClassName(place)[0].innerHTML = place;
  */
  }

 

  function showTime() {  
    var currentTime = new Date();
    var hours = currentTime.getHours();
    var minutes = currentTime.getMinutes();
    var seconds = currentTime.getSeconds();
    if (hours < 10) {
        hours = "0" + hours;
    }
    if (minutes < 10) {
        minutes = "0" + minutes;
    }
    if (seconds < 10) {
        seconds = "0" + seconds;
    }
    document.getElementById('clock').textContent = hours + ":" + minutes + ":" + seconds;   
}
  fixCORSE()
  showTime()
  scrapeVerse()
  setInterval(showTime, 500);
  
  var width = window.outerWidth;
  var height = window.outerHeight;

  console.log(`Width: ${width}px`);
  console.log(`Height: ${height}px`);

</script>



